{"version":3,"sources":["www/component/create-team.jsx"],"names":[],"mappings":"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","file":"www/component/create-team.js","sourcesContent":["(function(){\n    var Utils, HomeRequest;\n\n    function getDomainName(hostName)\n    {\n        return hostName.substring(hostName.lastIndexOf('.', hostName.lastIndexOf('.') - 1) + 1);\n    }\n\n    MiitComponents.CreateTeam = React.createClass({\n        getDefaultProps: function() {\n            return {\n                placeholder: {\n                    email: 'Votre addresse mail',\n                    team:  'Le nom de votre équipe'\n                },\n                submit: 'Créer une équipe'\n            };\n        },\n\n        getInitialState: function() {\n\n            return this.getDefaultErrors();\n        },\n\n        getDefaultErrors: function() {\n            return {\n                missing_email: false,\n                missing_team:  false,\n                invalid_email: false,\n                invalid_team:  false\n            };\n        },\n\n        componentWillMount: function() {\n            if(!Utils) {\n                Utils = MiitApp.get('miit-utils');\n            }\n            if(!HomeRequest) {\n                HomeRequest = MiitApp.get('miit-home-request');\n            }\n        },\n\n        handleSubmit: function(e) {\n            e.preventDefault();\n\n            var email = React.findDOMNode(this.refs.email).value.trim();\n            var team  = React.findDOMNode(this.refs.team).value.trim();\n\n            this.setState(this.getDefaultErrors());\n\n            // Check if there is data\n            if (!email || !team) {\n                this.setState({\n                    missing_email: !email,\n                    missing_team:  !team\n                });\n                return;\n            }\n\n            // Check if this is a correct email\n            if(!Utils.validator.email(email)) {\n                this.setState({\n                    invalid_email: true\n                });\n                return;\n            }\n\n            // Check if this is a correct team name\n            if(!Utils.validator.team(team)) {\n                this.setState({\n                    invalid_team: true\n                });\n                return;\n            }\n\n            HomeRequest.registration(email, team, function(data) {\n                if(data.done) {\n                    /** Redirect the user to the team\n                    var scheme = window.location.protocol + '//';\n                    var domain = getDomainName(window.location.host);\n\n                    var url = scheme + data.slug + '.' + domain;\n\n                    window.location = url;\n                    */\n                }   \n            });\n\n            return;\n        },\n\n        render: function() {\n            var classes_email = classNames({\n                'invalid': this.state.missing_email ||\n                           this.state.invalid_email\n            });\n\n            var classes_team = classNames({\n                'invalid':  this.state.missing_team ||\n                            this.state.invalid_team\n            });\n\n            return (\n                <form className=\"miit-component create-team\" onSubmit={this.handleSubmit}>\n                    \n                        <div className=\"row pt20 pb20\">\n                            <div className=\"col-md-6 mb10\">\n                                <div className=\"input-field left-icon icon-transparent push0\">\n                                    <i className=\"fa fa-envelope-o\"></i>\n                                    <input type=\"text\" className={classes_email} placeholder={this.props.placeholder.email} ref=\"email\" />\n                                </div>\n                            </div>\n\n                            <div className=\"col-md-6\">\n                                <div className=\"input-field left-icon icon-transparent col5\">\n                                    <i className=\"fa fa-users\"></i>\n                                    <input type=\"text\" className={classes_team}  placeholder={this.props.placeholder.team}  ref=\"team\" />\n                                </div>\n                            </div>\n                        </div>\n\n                        <button type=\"submit\" className=\"btn btn-dark mt5\">{this.props.submit}</button>\n                    \n                </form>\n            );\n        }\n    });\n})();"],"sourceRoot":"/source/"}